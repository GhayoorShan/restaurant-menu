import{j as e,u as s,a as t,b as i}from"./index-CBrz_PqU.js";import{r as a}from"./vendor-Dh0ZiJBb.js";const n="AED",r=({price:s,discountPrice:t})=>{if(t){const i=s-s*t;return e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("p",{className:"font-semibold",children:[e.jsx("span",{children:n}),e.jsx("span",{children:i})]}),e.jsxs("p",{className:"text-muted line-through",children:[e.jsx("span",{children:n}),e.jsx("span",{children:s})]})]})}return e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{children:n}),e.jsx("span",{children:s})]})},l=({name:s,description:t="",price:i,discountPrice:a,image:n,onAddToBasket:l,isOutOfStock:c=!0,currentQuantity:o})=>e.jsxs("div",{onClick:l,className:"flex justify-between items-center space-x-4 cursor-pointer py-5 border-b border-borderColor relative",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("h4",{className:"font-semibold text-primary",children:[o?`${o} X `:"",s]}),t&&e.jsx("p",{className:"text-sm text-gray-500",children:t}),e.jsx(r,{price:i,discountPrice:a})]}),n&&e.jsx("img",{src:n,alt:s,className:"w-24 h-24 rounded-md"}),c&&e.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs font-semibold py-1 px-2 rounded-md shadow-lg",children:"Out of Stock"})]}),c=(e,s=100)=>{const[t,i]=a.useState(e);return a.useEffect((()=>{e.length>s?i(`${e.slice(0,s)}...`):i(e)}),[e,s]),t},o=({item:n})=>{var r;const o=s(),d=t((e=>e.basket.items)),u=a.useMemo((()=>d.find((e=>e.id===n.id))),[d,n.id]),m=a.useMemo((()=>{var e;return(null==u?void 0:u.availableQuantity)??(null==(e=null==n?void 0:n.stock)?void 0:e.availability)??0}),[u,null==(r=null==n?void 0:n.stock)?void 0:r.availability]),[x,p]=a.useState(m),[h,j]=a.useState(x<=0);a.useEffect((()=>{p(m),j(m<=0)}),[m]);const v=a.useCallback((()=>{var e;x>0&&(o(i({id:n.id,name:n.name,price:n.price-n.price*n.discount_rate,currentQuantity:1,maxQuantity:(null==(e=null==n?void 0:n.stock)?void 0:e.availability)??0,availableQuantity:x-1})),p((e=>{const s=e-1;return s<=0&&j(!0),s})))}),[o,x,n]);return e.jsx(l,{name:n.name,price:n.price,discountPrice:n.discount_rate,onAddToBasket:v,image:n.photo||null,description:c(n.description,80),isOutOfStock:h,currentQuantity:(null==u?void 0:u.currentQuantity)??0})};export{o as default};
